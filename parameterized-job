currentBuild.displayName="${currentBuild.projectName}-#${currentBuild.number}"

pipeline{
    agent any
      parameters {
   	 choice choices: ['Develop', 'Release', 'Master'], name: 'Branch_Name'
	 
    	choice choices: ['Dev', 'Staging', 'Prod'], name: 'Environment_Name'
}
    
    environment {
        BUILD = 'Maven Build success'
        DEPLOY = 'Deploying artifacts success'
    }
    
    stages{
       stage('MavenBuild'){
            steps{
                sh label: '', script: '/opt/maven/bin/mvn clean package'
                echo "${env.BUILD}"
            }
        }
        stage('Tomcat Deploy'){
            steps{
                deploy adapters: [tomcat8(credentialsId: 'tomcat', path: '', url: 'http://10.220.110.123:8080/')], 
            contextPath: null, war: '**/*.war'
                echo "${env.DEPLOY}"
            }
        }
    }
    
    post {
	  failure {
	    mail body: "Please go to ${BUILD_URL} and verify the build",
		 subject: "Job ${JOB_NAME}##${BUILD_NUMBER} is failed", 
	    	 to: 'myowngithub@gmail.com'
	  }
	}
}
