currentBuild.displayName="${currentBuild.projectName}-#${currentBuild.number}"

pipeline{
    agent any
      parameters {
   	 choice choices: ['Develop', 'Release', 'Master'], name: 'Branch_Name'
	 
    	choice choices: ['Dev', 'Staging', 'Prod'], name: 'Environment_Name'
}
    
    environment {
        BUILD = 'Maven Build success'
        DEPLOY = 'Deploying artifacts success'
    }
    
    stages{
    	stage('Git Checkout'){
            steps{
                sh "git checkout ${params.Branch_Name}"
                echo "We are now in ${params.Branch_Name} branch"
            }
        }
    
       stage('MavenBuild'){
            steps{
                echo "We are building ${params.Branch_Name} branch"
            }
        }
        stage('Tomcat Deploy'){
            steps{
                echo "We are deploying ${params.Environment_Name} environment"
            }
        }
    }
    
    post {
	  failure {
	    mail body: "Please go to ${BUILD_URL} and verify the build",
		 subject: "Job ${JOB_NAME}##${BUILD_NUMBER} is failed", 
	    	 to: 'myowngithub@gmail.com'
	  }
	}
}
